jenkins:
  systemMessage: "AlgoCity CI/CD Pipelines - Auto-configured via JCasC"

credentials:
  system:
    domainCredentials:
      - credentials:
          - usernamePassword:
              scope: GLOBAL
              id: "github-token"
              username: "sahanw"
              password: "${GITHUB_TOKEN}"
              description: "GitHub Personal Access Token for AlgoCity Pipelines"
  
jobs:
  - script: >
      freeStyleJob('seed-job') {
        description('Auto-generated seed job that creates pipelines from applications/*.yaml files')
        scm {
          git {
            remote {
              url('https://github.com/sahanw/algocity_pipelines.git')
              credentials('github-token')
            }
            branch('*/main')
            extensions {
              cloneOptions {
                shallow(true)
                depth(1)
              }
            }
          }
        }
        steps {
          dsl {
            external('jenkins/jobs/create_pipelines.groovy')
            removeAction('DELETE')
            removeViewAction('DELETE')
            lookupStrategy('SEED_JOB')
          }
        }
        triggers {
          scm('H/5 * * * *')
        }
      }
